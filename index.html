<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>LinkedIn Scraper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; max-width: 700px; margin: 40px auto; }
    input, button { padding: 10px; font-size: 16px; }
    form { display: grid; gap: 12px; }
    pre { white-space: pre-wrap; background:#f6f8fa; padding:12px; border-radius:8px; }
  </style>
</head>
<body>
  <h2>Scrape a LinkedIn Post</h2>

  <form id="f" method="post" action="#" novalidate>
    <input type="url" name="postUrl" id="postUrl"
           placeholder="https://www.linkedin.com/posts/..." required />
    <label><input type="checkbox" name="addComments" id="addComments" checked> Include comments</label>
    <label><input type="checkbox" name="addReactions" id="addReactions" checked> Include reactions</label>
    <button type="submit">Run</button>
  </form>

  <pre id="out"></pre>

  <script>
    // ⬇️ Put your n8n PRODUCTION webhook URL here
    const WEBHOOK = "https://madiera.app.n8n.cloud/webhook/linkedin-scraper";

    const f   = document.getElementById('f');
    const out = document.getElementById('out');

    f.addEventListener('submit', async (e) => {
      e.preventDefault();                    // ← stops browser doing a GET submit
      out.textContent = "Starting…";

      const body = {
        postUrl: document.getElementById('postUrl').value.trim(),
        addComments: document.getElementById('addComments').checked,
        addReactions: document.getElementById('addReactions').checked,
      };

      try {
        const res  = await fetch(WEBHOOK, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body),
        });

        // Your n8n response might be JSON or HTML
        const text = await res.text();
        out.textContent = text;
      } catch (err) {
        out.textContent = "Failed: " + err.message;
      }
    });
  </script>
</body>
</html>
